package mk.com.iwec.elibrary.DAO;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import mk.com.iwec.elibrary.Books;
import mk.com.iwec.elibrary.interfaces.IBook;

public class BooksDAO extends Books implements IBook {
	private static final String INSERT_BOOK = "INSERT INTO books" + "  (id,title,author_id,publisher_id,issue_number,isbn,year_of_release,cover,formats_id,genre) VALUES" + "(?,?,?,?,?,?,?,?,?,?);";

	public void insertBook() {
		System.out.println(INSERT_BOOK);
		// establish connection
		try (Connection conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/e-library", "postgres",
				"0110"); PreparedStatement ps = conn.prepareStatement(INSERT_BOOK)) {
			ps.setInt(1, 2);
			ps.setString(2, "DesignPatterns");
			ps.setInt(3, 1);
			ps.setInt(4, 1);
			ps.setInt(5,0001);
			ps.setString(6,"AT123WEMZQ");
			ps.setDate(7, getYear_of_release());
			ps.setString(8, "Lilava");
			ps.setInt(9, 1);
			ps.setString(10, "Akcija");
			System.out.println(ps);

			int result = ps.executeUpdate();
			System.out.println(result);
		} catch (SQLException ex) {
			ex.getMessage();
		}
	}
}
